<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bed Monitor ‚Äî Real-time Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,400&family=Syne:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

  <div class="app">

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOPBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <header class="topbar">
      <div class="topbar-brand">
        <div class="brand-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M3 9H21M3 9V19C3 19.5523 3.44772 20 4 20H20C20.5523 20 21 19.5523 21 19V9M3 9L5 5H19L21 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <rect x="8" y="5" width="5" height="4" rx="1" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </div>
        <div>
          <h1>BedMonitor <span>v1.0</span></h1>
          <p class="brand-sub">Ward A ¬∑ Real-time Occupancy System</p>
        </div>
      </div>
      <div class="topbar-right">
        <div class="time-display" id="clockDisplay">--:--:--</div>
        <div class="conn-pill" id="connPill">
          <span class="conn-dot" id="connDot"></span>
          <span id="connLabel">CONNECTING</span>
        </div>
      </div>
    </header>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN CONTENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="main-content">

      <!-- LEFT COLUMN -->
      <div class="left-col">

        <!-- BIG STATUS CARD -->
        <div class="status-card" id="statusCard">
          <div class="status-card-top">
            <span class="bed-tag">BED 01</span>
            <span class="status-badge" id="statusBadge">
              <span class="badge-dot" id="badgeDot"></span>
              <span id="badgeText">Loading</span>
            </span>
          </div>

          <div class="status-visual">
            <div class="bed-illustration" id="bedIllus">
              <svg id="bedSvg" width="110" height="110" viewBox="0 0 110 110" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="8" y="52" width="94" height="36" rx="6" class="bed-fill bed-stroke" stroke-width="2.5"/>
                <rect x="8" y="38" width="16" height="50" rx="5" class="bed-fill2 bed-stroke" stroke-width="2"/>
                <rect x="30" y="42" width="22" height="14" rx="5" class="bed-pillow bed-stroke" stroke-width="2"/>
                <rect x="30" y="52" width="72" height="24" rx="3" class="bed-blanket bed-stroke" stroke-width="1.5" stroke-dasharray="7 4"/>
                <rect x="12" y="86" width="9" height="14" rx="3" class="bed-leg"/>
                <rect x="89" y="86" width="9" height="14" rx="3" class="bed-leg"/>
                <!-- Patient -->
                <circle cx="41" cy="37" r="9" class="patient-head" id="patientHead"/>
                <ellipse cx="41" cy="52" rx="10" ry="7" class="patient-body" id="patientBody"/>
              </svg>
            </div>

            <div class="status-text-block">
              <div class="status-headline" id="statusHeadline">Loading‚Ä¶</div>
              <div class="status-desc" id="statusDesc">Connecting to sensor system‚Ä¶</div>
            </div>
          </div>

          <!-- TIMESTAMPS -->
          <div class="ts-row">
            <div class="ts-block">
              <div class="ts-label">Allotted At</div>
              <div class="ts-value ts-green" id="allottedAt">‚Äî</div>
            </div>
            <div class="ts-divider"></div>
            <div class="ts-block">
              <div class="ts-label">Vacated At</div>
              <div class="ts-value ts-red" id="vacatedAt">‚Äî</div>
            </div>
            <div class="ts-divider"></div>
            <div class="ts-block">
              <div class="ts-label">Duration</div>
              <div class="ts-value" id="durationVal">‚Äî</div>
            </div>
          </div>
        </div>

        <!-- WEIGHT + UPDATE MINI CARDS -->
        <div class="mini-cards">
          <div class="mini-card">
            <div class="mini-icon">‚öñ</div>
            <div class="mini-info">
              <div class="mini-label">Current Weight</div>
              <div class="mini-value" id="weightVal">‚Äî g</div>
            </div>
          </div>
          <div class="mini-card">
            <div class="mini-icon">üïê</div>
            <div class="mini-info">
              <div class="mini-label">Last Sensor Update</div>
              <div class="mini-value" id="lastUpdate">‚Äî</div>
            </div>
          </div>
        </div>

      </div>

      <!-- RIGHT COLUMN -->
      <div class="right-col">

        <!-- STATS -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Total Events Today</div>
            <div class="stat-value" id="statTotal">0</div>
            <div class="stat-bar"><div class="stat-bar-fill all" id="barTotal" style="width:0%"></div></div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Occupied Events</div>
            <div class="stat-value green" id="statOcc">0</div>
            <div class="stat-bar"><div class="stat-bar-fill occ" id="barOcc" style="width:0%"></div></div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Empty Events</div>
            <div class="stat-value red" id="statEmp">0</div>
            <div class="stat-bar"><div class="stat-bar-fill emp" id="barEmp" style="width:0%"></div></div>
          </div>
        </div>

        <!-- EVENT LOG -->
        <div class="log-panel">
          <div class="log-panel-head">
            <h2>Event Log</h2>
            <div class="log-head-right">
              <span class="log-count-pill" id="logCount">0 records</span>
              <button class="refresh-btn" id="refreshBtn" title="Refresh">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                  <path d="M1 4V10H7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M3.51 15C4.15839 16.8604 5.38734 18.4708 7.01166 19.5949C8.63598 20.719 10.5677 21.2997 12.5408 21.2584C14.5139 21.2171 16.4181 20.5558 17.9936 19.3647C19.5692 18.1736 20.7299 16.513 21.3052 14.6283C21.8805 12.7436 21.8397 10.7258 21.1886 8.86607C20.5375 7.00636 19.3098 5.39473 17.6876 4.26931C16.0654 3.14389 14.1361 2.56315 12.1638 2.60881C10.1915 2.65446 8.29191 3.32407 6.72 4.53" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="log-table-wrap" id="tableWrap">
            <div class="log-loading">
              <div class="spinner"></div>
              <span>Connecting to database‚Ä¶</span>
            </div>
          </div>
        </div>

      </div>
    </main>

    <!-- TOAST NOTIFICATION -->
    <div class="toast" id="toast">
      <span class="toast-dot" id="toastDot"></span>
      <span id="toastMsg">Status changed</span>
    </div>

  </div>

  <!-- Supabase CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- App scripts -->
  <script src="js/config.js"></script>
  <script src="js/helpers.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/realtime.js"></script>
  <script src="js/main.js"></script>

</body>
</html>
